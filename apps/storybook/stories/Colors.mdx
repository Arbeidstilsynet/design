import { Meta, ColorPalette, ColorItem } from "@storybook/addon-docs/blocks";

import { useEffect, useState } from "react";
import { getGroupedThemeColors, getThemeColors } from "./getThemeColors";

<Meta title="Colors" />

export const DemoEffect = () => {
  const [colors, setColors] = useState({});
  const readColors = () => {
    const themeColors = getGroupedThemeColors();
    setColors(themeColors);
  };
  useEffect(() => {
    const themeColors = getGroupedThemeColors();
    setColors(themeColors);
  }, []);
  const setDark = () => {
    document.documentElement.setAttribute("data-color-scheme", "dark");
    requestAnimationFrame(readColors);
  };
  const setLight = () => {
    document.documentElement.setAttribute("data-color-scheme", "light");
    requestAnimationFrame(readColors);
  };
  return (
    <>
      <div>
        <button type="button" onClick={setDark}>
          Dark mode
        </button>
        <button type="button" onClick={setLight}>
          Light mode
        </button>
      </div>
      <ColorPalette>
        {Object.entries(colors).map(([name, value]) => (
          <ColorItem key={name} title={name} colors={value} />
        ))}
      </ColorPalette>
    </>
  );
};

<div>
  # Colors from the Arbeidstilsynet theme

Use with `--ds-color-` prefix.
Example `--ds-color-primary-base-active`.

<DemoEffect />

</div>
